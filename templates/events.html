{% extends 'base.html' %}

{% block title %}Events{% endblock %}

{% block styles %}
  {{ super() }}
  <style>
    /* Styles for distinguishing events by roles */
    .volunteer-events {
      display: none;
    }
    .finder-events {
      display: none;
    }
  </style>
{% endblock %}

{% block content %}
    <h2>Events</h2>

    <!-- Date filtering form with date picker -->
    <form id="date-filter-form">
        <label for="start-date">Start Date:</label>
        <input type="date" id="start-date" name="start_date">

        <label for="end-date">End Date:</label>
        <input type="date" id="end-date" name="end_date">

        <button type="button" onclick="filterEvents()">Filter</button>
    </form>

    <!-- Tabs for volunteer and finder events -->
    <ul class="nav nav-tabs" id="myTabs">
        <li class="nav-item">
            <a class="nav-link active" id="all-events-tab" data-bs-toggle="tab" href="#all-events">All Events</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="volunteer-events-tab" data-bs-toggle="tab" href="#volunteer_events">Volunteer Events</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="finder-events-tab" data-bs-toggle="tab" href="#finder_events">Finder Events</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade" id="volunteer_events">
            <!-- Code to display volunteer events -->
            {% include 'volunteer_events.html' %}
        </div>
        <div class="tab-pane fade" id="finder_events">
            <!-- Code to display finder events -->
            {% include 'finder_events.html' %}
        </div>
    </div>

    <script>
        function filterEvents() {
            var startDate = document.getElementById('start-date').value;
            var endDate = document.getElementById('end-date').value;

            // Iterate through all events and show/hide them based on the date
            var allEvents = document.querySelectorAll('.your-event-class');  // Replace 'your-event-class' with the class of your events
            allEvents.forEach(function(event) {
                var eventDate = event.getAttribute('data-your-date-attribute');  // Replace 'data-your-date-attribute' with the attribute containing the event date
                if (eventDate >= startDate && eventDate <= endDate) {
                    event.style.display = 'block';
                } else {
                    event.style.display = 'none';
                }
            });
        }
    </script>
{% endblock %}
